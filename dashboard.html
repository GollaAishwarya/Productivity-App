<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - Productivity App</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" crossorigin="anonymous"></script>
  <style>
    body { margin:0; font-family:'Fredoka One', cursive; display:flex; background-color:lavender; color:white; }
    .sidebar { width:220px; background:rgba(255,255,255,0.15); backdrop-filter:blur(10px); height:100vh; display:flex; flex-direction:column; padding:20px; box-shadow:2px 0 10px rgba(0,0,0,0.2); }
    .sidebar h2 { text-align:center; margin-bottom:20px; }
    .sidebar .profile { display:flex; align-items:center; gap:10px; margin-bottom:20px; }
    .sidebar .profile img { width:40px; height:40px; border-radius:50%; border:2px solid white; object-fit:cover; }
    .sidebar button { background:#ff5722; color:white; border:none; padding:12px; margin:10px 0; border-radius:8px; cursor:pointer; font-size:16px; transition:background 0.3s; }
    .sidebar button:hover { background:#e64a19; }

    /* Main Section */
    .main { flex-grow:1; padding:20px; position:relative; text-align:center; }
    .welcome { font-size:36px; margin-bottom:25px; font-weight:bold; }

    /* Leaderboard Button */
    .leaderboard-btn { 
      background:white; 
      color:#ff5722; 
      padding:15px 30px; 
      border-radius:12px; 
      font-size:20px; 
      cursor:pointer; 
      border:none; 
      margin-bottom:25px; 
      box-shadow:0 4px 8px rgba(0,0,0,0.2); 
    }

    /* Controls (Search + Pending Work) */
    .controls { display:flex; justify-content:center; gap:20px; margin-bottom:25px; }
    .controls input,.controls select { padding:14px; border-radius:10px; border:none; font-size:16px; width:220px; }

    /* Task List */
    .tasks-list { display:flex; flex-direction:column; align-items:center; margin-bottom:30px; }
    .task-item { background:rgba(255,255,255,0.2); color:white; width:80%; padding:12px; margin:8px 0; border-radius:10px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 4px 10px rgba(0,0,0,0.2); }

    .task-actions button { background:transparent; border:none; color:white; font-size:18px; cursor:pointer; margin-left:8px; }
    .task-desc { font-size:12px; opacity:0.9; }
    .priority-badge { padding:2px 8px; border-radius:12px; font-size:12px; margin-left:6px; }
    .priority-badge.low{ background:#7fb77e; }
    .priority-badge.medium{ background:#f5c26b; }
    .priority-badge.high{ background:#f27474; }

    /* Progress Section */
    .progress-section { text-align:center; margin-bottom:40px; }
    .progress-section p { font-size:18px; margin-bottom:10px; }

    .progress-row{ display:flex; justify-content:center; gap:30px; flex-wrap:wrap; }
    .progress-chart{ width:280px; margin:10px auto; }

    /* Floating Add Task Button */
    .add-btn { position:fixed; bottom:30px; right:30px; background:#ff5722; color:white; border:none; width:60px; height:60px; border-radius:50%; font-size:32px; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.3); transition:transform 0.3s; }
    .add-btn:hover { transform:scale(1.1); }

    /* Modal */
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
    .modal-content { background:lavender; color:white; padding:30px; border-radius:15px; width:400px; text-align:center; }
    .modal-content input, .modal-content textarea, .modal-content select { width:90%; padding:10px; margin:8px 0; border-radius:8px; border:none; font-size:16px; }
    .modal-content button { background:#ff5722; color:white; border:none; padding:10px 20px; margin:10px; border-radius:10px; cursor:pointer; transition:background 0.3s; }
    .modal-content button:hover { background:#e64a19; }

    .toast{ position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#333; color:#fff; padding:10px 16px; border-radius:12px; opacity:.95; }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>Menu</h2>
    <div class="profile">
      <img id="nav-profile-pic" src="https://via.placeholder.com/40" alt="Profile"/>
      <div>Me</div>
    </div>
    <button onclick="window.location.href='profile.html'">Profile</button>
    <button onclick="window.location.href='dashboard.html'">Home</button>
    <button onclick="window.location.href='leaderboard.html'">Leaderboard</button>
    <button onclick="logout()">Logout</button>
  </div>

  <!-- Main Content -->
  <div class="main">
    <!-- Welcome -->
    <div class="welcome">Welcome, <span id="username">User</span> üëã</div>

    <!-- Leaderboard Button -->
    <button class="leaderboard-btn" onclick="window.location.href='leaderboard.html'">üèÜ View Leaderboard</button>

    <!-- Controls -->
    <div class="controls">
      <input id="task-search" type="text" placeholder="üîç Search tasks..." />
      <select id="task-status-filter">
        <option>All</option>
        <option>Pending</option>
        <option>Completed</option>
      </select>
    </div>

    <!-- Task List -->
    <div class="tasks-list" id="task-list"></div>

    <!-- Daily Progress -->
    <div class="progress-section">
      <p><b>üìä Daily Progress</b></p>
      <div class="progress-row">
        <div class="progress-chart"><canvas id="taskChart"></canvas></div>
        <div class="progress-chart"><canvas id="dailyChart"></canvas></div>
      </div>
    </div>

    <!-- Floating Add Task Button -->
    <button class="add-btn" onclick="openTaskModal()">+</button>
  </div>

  <!-- Add Task Modal -->
  <div class="modal" id="task-modal">
    <div class="modal-content">
      <h2>Add New Task</h2>
      <input type="text" id="task-title" placeholder="Task Name" />
      <input type="date" id="task-date" />
      <input type="time" id="task-time" />
      <select id="task-priority">
        <option>Low</option>
        <option selected>Medium</option>
        <option>High</option>
      </select>
      <textarea id="task-desc" placeholder="Task Description"></textarea>
      <button onclick="addTask()">Save</button>
      <button onclick="closeTaskModal()">Cancel</button>
    </div>
  </div>

  <!-- Edit Task Modal -->
  <div class="modal" id="edit-task-modal">
    <div class="modal-content">
      <h2>Edit Task</h2>
      <input type="text" id="edit-task-title" placeholder="New Task Name (optional)" />
      <input type="date" id="edit-task-date" />
      <input type="time" id="edit-task-time" />
      <select id="edit-task-priority">
        <option>Low</option>
        <option selected>Medium</option>
        <option>High</option>
      </select>
      <textarea id="edit-task-desc" placeholder="New Description (optional)"></textarea>
      <button onclick="saveTaskEdits()">Save Changes</button>
      <button onclick="closeEditTaskModal()">Cancel</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
